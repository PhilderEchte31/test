<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <title>Searchless ‚Äì schnell & simpel suchen</title>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="theme-color" content="#f5f5f7" id="theme-color" />
  <meta name="description" content="Eine schlanke Google-Such-Oberfl√§che mit Darkmode & Suggest" />

  <!-- Preload Logo f√ºr schnelleres Largest Contentful Paint -->
  <link rel="preload" href="https://i.ibb.co/0Rwk8422/searchless-logo-1.png" as="image" />

  <!-- Darkmode sofort setzen ‚Äì verhindert Flash -->
  <script>
    (function(){
      const t = localStorage.getItem('theme');
      if (t === 'dark' || (!t && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        document.documentElement.classList.add('dark');
      }
    })();
  </script>

  <style>
    /* ---------- CSS-Variablen ---------- */
    :root {
      --bg: #f5f5f7;
      --text: #1d1d1f;
      --box: #ffffffcc;
      --accent: #0071e3;
      --radius: 20px;
      --font: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    }
    html.dark {
      --bg: #1d1d1f;
      --text: #f5f5f7;
      --box: #2c2c2ecc;
      --accent: #0a84ff;
    }

    /* ---------- Reset & Basis ---------- */
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: var(--font);
      background: var(--bg);
      color: var(--text);
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      transition: background .35s, color .35s;
      -webkit-tap-highlight-color: transparent;
    }

    /* ---------- Header / Logo ---------- */
    header {
      text-align: center;
      padding: 6vh 20px 0;
    }
    header img {
      height: 3rem;
      width: auto;
    }

    /* ---------- Such-Box ---------- */
    main {
      flex: 1;
      display: grid;
      place-content: center;
      padding: 0 20px 10vh;
    }
    .search-card {
      width: 90vw;
      max-width: 680px;
      background: var(--box);
      border-radius: var(--radius);
      backdrop-filter: blur(24px);
      box-shadow: 0 12px 40px rgba(0,0,0,.12);
      padding: 28px;
    }
    form {
      display: flex;
      gap: 12px;
      position: relative;
    }
    input[type="text"] {
      flex: 1;
      padding: 16px 18px;
      font-size: 1.1rem;
      border: none;
      border-radius: 14px;
      outline: none;
      background: rgba(255,255,255,.9);
      color: #000;
    }
    html.dark input[type="text"] {
      background: rgba(30,30,30,.9);
      color: #fff;
    }
    button[type="submit"] {
      padding: 16px;
      border: none;
      border-radius: 14px;
      background: var(--accent);
      color: #fff;
      font-size: 1.3rem;
      cursor: pointer;
      transition: transform .15s;
    }
    /* Touch-only Hovers */
    @media (hover: hover) {
      button[type="submit"]:hover {
        transform: translateY(-2px);
      }
    }

    /* ---------- Suggest-Liste ---------- */
    .suggestions {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      margin-top: 8px;
      background: var(--box);
      border-radius: 14px;
      overflow: hidden;
      box-shadow: 0 8px 24px rgba(0,0,0,.15);
      z-index: 10;
    }
    .suggestion-item {
      padding: 14px 18px;
      cursor: pointer;
      font-size: 1.05rem;
    }
    @media (hover: hover) {
      .suggestion-item:hover {
        background: rgba(0,0,0,.05);
      }
    }
    html.dark .suggestion-item:hover {
      background: rgba(255,255,255,.08);
    }

    /* ---------- Darkmode Toggle ---------- */
    footer {
      text-align: center;
      padding: 0 20px 20px;
      font-size: .8rem;
      color: var(--text);
      opacity: .6;
    }
    #toggle-darkmode {
      margin-top: 20px;
      border: 1px solid var(--text);
      background: transparent;
      color: var(--text);
      padding: 10px 18px;
      border-radius: 12px;
      cursor: pointer;
    }

    /* ---------- Animationen ---------- */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    header, .search-card, footer {
      animation: fadeIn .7s ease-out both;
    }

    /* ---------- kleine Screens ---------- */
    @media (max-width: 500px) {
      header img { height: 2.4rem; }
      input[type="text"] { font-size: 1.25rem; }
      .search-card { padding: 20px; }
      form { flex-direction: column; }
      button[type="submit"] { width: 100%; }
    }
  </style>
</head>

<body>
  <header>
    <!-- srcset f√ºr scharfe Logos auf Retina -->
    <img src="https://i.ibb.co/0Rwk8422/searchless-logo-1.png"
         srcset="https://i.ibb.co/0Rwk8422/searchless-logo-1.png 1x,
                 https://i.ibb.co/0Rwk8422/searchless-logo-1.png 2x"
         width="200" height="48" alt="Searchless">
  </header>

  <main>
    <div class="search-card">
      <form action="https://www.google.com/search" method="GET" target="_self" id="searchForm">
        <input  name="q" type="text" id="searchInput"
                placeholder="Wonach suchst du?" autocomplete="off" required>
        <button type="submit" aria-label="Suchen">üîç</button>
        <div id="suggestions" class="suggestions" hidden></div>
      </form>
      <button id="toggle-darkmode">üåô Dark Mode</button>
    </div>
  </main>

  <footer>
    &copy; 2025 ‚Äì Searchless
  </footer>

  <script>
    /* ---------- Darkmode Logik ---------- */
    const toggle = document.getElementById('toggle-darkmode');
    const html = document.documentElement;
    const metaColor = document.getElementById('theme-color');

    function setDark(isDark) {
      html.classList.toggle('dark', isDark);
      metaColor.content = isDark ? '#1d1d1f' : '#f5f5f7';
      toggle.textContent = isDark ? '‚òÄÔ∏è Light Mode' : 'üåô Dark Mode';
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
    }
    toggle.addEventListener('click', () => setDark(!html.classList.contains('dark')));
    /* init durch Inline-Script oben bereits erledigt */

    /* ---------- Suggest mit Debounce + Fallback ---------- */
    const input   = document.getElementById('searchInput');
    const suggest = document.getElementById('suggestions');
    let   timer   = null;

    input.addEventListener('input', () => {
      clearTimeout(timer);
      const q = input.value.trim();
      if (!q) return suggest.hidden = true;
      timer = setTimeout(() => fetchSuggest(q), 200);
    });

    function fetchSuggest(q) {
      const script = document.createElement('script');
      const url = 'https://suggestqueries.google.com/complete/search?client=firefox&hl=de&callback=showSuggest&q=' +
                  encodeURIComponent(q);
      script.src = url;
      script.onerror = () => suggest.hidden = true;   // netzwerk-fehler ignorieren
      document.body.appendChild(script);
      script.remove();
    }

    window.showSuggest = function(arr) {
      const items = (arr && arr[1]) ? arr[1] : [];
      if (!items.length) return suggest.hidden = true;
      suggest.innerHTML = items.map(str =>
        `<div class="suggestion-item">${str}</div>`).join('');
      suggest.hidden = false;
    };

    /* Klick auf Vorschlag -> absenden */
    suggest.addEventListener('click', e => {
      if (e.target.classList.contains('suggestion-item')) {
        input.value = e.target.textContent;
        suggest.hidden = true;
        document.getElementById('searchForm').submit();
      }
    });

    /* au√üerhalb klicken -> liste zu */
    document.addEventListener('click', e => {
      if (!e.target.closest('#searchInput, #suggestions'))
        suggest.hidden = true;
    });
  </script>
</body>
</html>
